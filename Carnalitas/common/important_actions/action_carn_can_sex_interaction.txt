action_carn_can_sex_interaction = {
	combine_into_one = yes
	check_create_action = {
		if = {
			limit = {
        		NOR = {
					has_game_rule = carn_sex_interaction_disabled
					has_character_flag = carn_sex_interaction_effect_cd
				}
				carn_can_have_sex_trigger = yes
				OR = {
					any_consort = {
						root = { is_attracted_to_gender_of = prev }
						is_busy_in_events_localised = yes
						carn_can_have_sex_trigger = yes
					}
					any_relation = {
						type = lover
						root = { is_attracted_to_gender_of = prev }
						is_busy_in_events_localised = yes
						carn_can_have_sex_trigger = yes
					}
				}				
			}
			every_consort = {
				limit = {
					root = { is_attracted_to_gender_of = prev }
            		is_busy_in_events_localised = yes
					carn_can_have_sex_trigger = yes
				}
				add_to_temporary_list = sexable_partner_list
			}
			every_relation = {
				type = lover
				limit = {
					root = { is_attracted_to_gender_of = prev }
					is_busy_in_events_localised = yes
					carn_can_have_sex_trigger = yes
				}					
				add_to_temporary_list = sexable_partner_list
			}
			every_in_list = {
				list = sexable_partner_list
				try_create_important_action = {
					important_action_type = action_carn_can_sex_interaction
					actor = root
					recipient = this
				}
			}
		}
	}

	effect = {
		open_interaction_window = {
			interaction = carn_sex_interaction
			actor = scope:actor
			recipient = scope:recipient
		}
	}
}