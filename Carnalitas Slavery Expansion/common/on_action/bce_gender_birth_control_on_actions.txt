on_pregnancy_mother = {
	events = {
		bce_gender_event.0001
	}
}

on_birthday = {
	on_actions = {
		bce_gender_birth_control_update
	}
}

bce_gender_birth_control_update = {
	trigger = {
		trigger_if = {
			limit = {
				has_character_flag = bce_gender_birth_control
				is_ai = yes
			}
			trigger_if = {
				limit = { exists = concubinist }
				concubinist = { is_ai = yes	}
			}
			trigger_else_if = {
				limit = { exists = primary_spouse }
				primary_spouse = { is_ai = yes }
			}
			trigger_else_if = {
				limit = {
					any_relation = {
						type = slave_owner
						count > 0
					}
				}
				any_relation = {
					type = slave_owner
					is_ai = yes
				}
			}
			trigger_else_if = {
				limit = {
					exists = liege
				}
				trigger_if = {
					limit = {
						is_ruler = no
						OR = {
							has_relation_lover = liege
							has_relation_soulmate = liege
						}
					}
					liege = { is_ai = yes }
				}
				trigger_else_if = {
					limit = {
						any_parent = {
							count > 0
						}
					}
					any_parent = {
						count = all
						is_ai = yes
					}
				}
				trigger_else = {}
			}
			trigger_else = {}
		}
		trigger_else = {
			has_character_flag = bce_gender_birth_control
			is_ai = yes
		}
	}
	
	effect = {
		if = {
			limit = { has_character_flag = bce_gender_birth_control }
			remove_character_flag = bce_gender_birth_control
		}
		if = {
			limit = { has_character_modifier = bce_gender_birth_male }
			remove_character_modifier = bce_gender_birth_male
		}
		if = {
			limit = { has_character_modifier = bce_gender_birth_female }
			remove_character_modifier = bce_gender_birth_female
		}
		if = {
			limit = { has_character_modifier = bce_gender_birth_twins }
			remove_character_modifier = bce_gender_birth_twins
		}
		if = {
			limit = { has_character_modifier = bce_gender_birth_twins_male }
			remove_character_modifier = bce_gender_birth_twins_male
		}
		if = {
			limit = { has_character_modifier = bce_gender_birth_twins_female }
			remove_character_modifier = bce_gender_birth_twins_female
		}
	}
}
